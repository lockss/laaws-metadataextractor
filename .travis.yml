language: java
sudo: required
services:
- docker
jdk:
- openjdk8
branches:
  only:
  - master
  - develop
os:
- linux
install: true
script: mvn -q clean install
before_deploy:
- bash ./ci/before_deploy.sh
deploy:
  provider: script
  script: bash ./ci/deploy.sh
  on:
    branch: master
    tags: true
cache:
  directories:
  - "$HOME/.m2"
notifications:
  email: dev-notify@lockss.org
before_install:
- openssl aes-256-cbc -K $encrypted_58abfe8ac3f8_key -iv $encrypted_58abfe8ac3f8_iv
  -in codesigning.asc.enc -out codesigning.asc -d
env:
  global:
  - secure: BkEXGvCG51FylG4lsbJVeNhaVaQw7r/tOg3lLkg0w9s8706Pmeu0yZMCFlFYUFBhOGiXjQ2AboTPkwMYkjHAc7XdTdO3OfSc5jrIKZ0O57rjxhylBjTO9gXrM18cHFAx1CD1wbT3qYZoQEXumy8vBMPrxaTS+6SNLjVQSFo25J+Nz8CTjZgl/QlSOEIi7k1tl3hUYcfyqUyoD2fvcDFRsL49PotCW6WtBFmxy1Liy6q1AtKIZu4RcFK01mQNbPZBE2jrxU7uFGDD1H+/4NNBOh3MI86rJZbWyiRzI5EkJRedcv+8ESQiEK7xtikResxckBlmyxa+W9gOqUeONw4aWi0pYy/ulDP5yZtv8IH/ljY68UBytzcULH6ithgbzFftZQbIL3AAfzZwFd9Odigs2KEgAORfFsQTGrTDhE2djHDfqaYBD/Syp3912Y9yCt+LFN4K4fnjEeD5dVUr6ODnwyxUAY/z5xziQhsz0Drp7UxvlN26LEI7OZul67pNChj7G3/bjUFbDwrxMbfIBRG/A3ys2OfdQHmy8NscbjVDx6erFy3qtZXfQWFrJhz3JEGZxijOHD56s+ANafDkESkuUBVpdQJZp4YtQAxJy6vSNckOmBa254HSMiiot0ozcgmRZOxJ4kVr6TckHrAAy5IFWCNMjMaR2nhXEH+bPuUfBSM=
  - secure: p8ndADRhT1Ho1NpRkl47v4fKd1Jb76BcPuJTMni57AcKiECIWF6SaVuWMAyTd4B1WEwoWHzKv6Wv1Pzid4jD70haTwKAh+DlehjW+dC2h1oOfjxMYuJVIPBRakL60dgzF/DSNebaBbFLFKlPGaBJksXoMB+HynW9iwQx59kGdqDG85k4Wo2xNBkGTrKdBngI3DJM0yPn011QMo4EC9DREG7uLGsYQaGKLqEb0UsU3nfS9pR05cp/ecKUssV+6N0se+YM7bnO49lJTpyHhqoaKpInGONe09CMLqvx5N8U0We7REPiuNk4OSg6IZGPsPR8r8sM9cj4+icu3dLsJsnoLJn5gJr3BTJABejVvhzIeIOOtyoa6mtWeu9RRRP4dH8Isr+HkAgB6NGO6FtSIq+7OwPVRtHH3qjN5UXMC6IPgZ/0QCSqIZq0G4Fk8cfmrPIbbo/sY69cqa4LhPc+iOg6U/L1dIfsfRh3I/W57vAarcBp9mFXF6gBVooG3vGtiMzQGpwW+wjf/xy0Kuz4QBOwah79nQRQjYgjdyEBJHPOvJQ4yBc2ANF1tZmfE0Vm9rftJKKaaJRV6cJoNasqHZ6u7duekrv0B30l3OfO5KGHItaJoy0A9x3bLG5W4xyzcWVQ57sax02jnFIazowfDrxNp3zJMCPhjeuxwMLug8lPmUE=
  - secure: HYIG/Q2GMyhiiLPI6t9959Q4VVMabjTyKINjSY/3WcvvQdnnScWUuW84eE6FYhXhlZFQLMfMeJPi9KrA9gCuw6iQbsUkS2JfaPRvmjcchBVlggZao1o3fn5UKE/4ZekCMqdpMAvDffe+8Z/pZfAOMdNdVL++cdTM88CJ80Fz1hjDlHO59bI+KCNochdHwgp8cxUfzWHOiGB6/VtaT++66MG2UqH9ytMejMf7vtq2tm1Ic+HhNyLos5jqtASvrb3w1kT20rOPcARkTI08FlBDY55lTmkfV4nHJbMnJCb3gxRAQH2fENtUiDxDXWJuNuBYkYzeQwwm1MIn346p6bqc1W98VJ6k+PJQjDtiRN8Qhalr2FvSvr+75hMRU8w1zy7Sz84rhDaD6wdu3S2sHBkDiWQEOpTPrRCzOUY84QrmJoOqc5Kk+fMU+S7ajh/dGiGr6z7ECuWMf/kH9BoSRkOyhaKK06qZsks+/pSIM8uTugxLtmSpYc7L9gBR8w9rYbU4hkF6Micze10ItKLGP8pKYTNB7vaUvmaHTyMD4zk5h2lK2DeZdd+xIMMphSFij3QUiEFfm7aJff4Y6elcdMl+Zc5ETp9CtPCjWMb4rOyWARapJMl6ypA1AzQlgYCkCXLpCL83L4KpDk/2RwC9m08CvO2wUyBLS/4VXBNZJm4kk3o=
  - secure: dqpSYmiigeGAX3tHU1EjMoVf3fsroRbggUWcbbpdvtpY8YnMWlYxOl5kppoM2TDer+YmQP9yS17dljVvfrx6u9NLo3UzkehWCSWxMDqxznXI2PrG9BVVsYL4PeXOP8+uLZQ0NjS0OEloRO34xZ4BDfXoJ9vgHbF/RBdGU5+VfkvFWspR7bExiNywCVBOMqOveo+fB0U+HX+2d63w4amfAsUiRrQSS78AhCuXeHcZORCyDM0Yc/ZzUqUHaku8dbq94Ts1ftq7eRXAnSBxHzJrrp4twtJOI9+aZNx7AWZAlwsIzBRnbko8/RBsaRm79U6Xu8dsBKgDnqsVn7e6885NCjRO5HP6grgXM0t1chvsYuYOA0zyudPdCcnwj1PC0U8o4ycYxtc8DzciBaeGh4FyzjuDL7pXRIYXNu+RUO6GN3AGRjwXs/Pf6VZgqfTURnz5D5XaB2yAfwgZ8CN943aSeRtAdjrkKekdPGJl1UTPpZ8R2kfgt4/bkhYFe6/qihfdUYxszWoAMcoZwD5PYnK2VZLujx9vs/2uCpKVPtU/cufpAPm/sWDrJAqUyqdJwes+GKv2OFFl+TmryTqpsldrDoD0s+byu2S1TCGFdy+U2R+QUcJhMlbwM9t9mcDf8VT/o8IAEeVUtHFI+31Mdw3AfVNwky0UITuQZTcE/zTbR6E=
  - secure: KSkEk8L/a/mIZr1a341GIZMs0n9uaHxScDl4hLUcOR5kFihK9XP5UQOSaeS45z48VG5O3NlJgXyPA42mQdRBqlKLYEYFs2jGcsaP7UVU97QcDzUB9ItuZ1pnw6F5j1GLjvZY3nbdEeL8ersTp8mQX70UqZBE+MQ4DEPV+6r3EuNZm8iSt3u3jcSPXx0n7/hUpu2CjAU7RiehSMfx59Jg3QczUl/ZzRm16FO2pLYCGyqt5RDxSOhksyZUCuEHd9hZpCXxajd271fXufphhCkj2ryp+SJhqOivqTjVnUBjYHi5OS2Yz3xgHCPvEgOCEfywCvcoQkOqU2FbGTjYPSmz/L+UnCi64l2f+zkvuFmuoJ1dWi6hzfJaI1NErZLFwkRp2IGuZ7xZargRKlIDiL05Dzn75ux7WIqCt9EiQIapERHlyf0CPm4GoDgqrjRTIIPOqg9gQu3Dh22dlK6I8x8vhmEoVdRRr5nGuUQlR3qfDOPLfKcQe0b8OocP/W1y82LryUgU0ZDnaPhGywxtCUTbWSqSdmFq5krPaL4oGtYn42A7KfjOIj+gkauq3Pdas+hrJBPSQoZtBNb+mWd2Wsdmj4fXcAfN1mZtRDL2/h4fI5ZUb0WOjtkUIBhMZMhQ6Keipdwf+ZV2EDQ/gzm25wQgnkxNlLarnnnim7yLcaBc8vM=
  - secure: Ir8JrFuY6AyGKi2z11+0JeRV20iMHvONaArqmKJ19dFw+q3pn0yuUA+dKYCJrV0NLQuLSlt63lhWeA2KdYsiiflLEPoHUJ5sg0hWf3noyAwRKrWqQbZBcNe5wEOZWTKpQ1stovsexVKV36RcAr4ytqvx2MtrPSVcp57f0L8QWxA7wKIP94+U9EFoSGFgVbVpmaqxf1StxAP8LLlCoxo6OQy9NYervjPxD6nSo1w952fpbA1RpDsS4XBQcxhSTid7FyeL0FNs9NvfTw+BUTNaOurZ2jukuBhZAHEgHIdogpo3H3y79m9xOjTvHhashtxuGbFQuOsO/BNshWZKrBifBDHZqpH3rUEEO5VrjjwJtX9YSkDWOzFE9zQie5YjjG8HVpyR08GY/a8m/2PSdA0NkXWQvLxEoNVQd0B4/TBj1mmFWWsi8BMTZaieYhUFxOdlliQExtSyjsjERpnrt3C+RhD/kEvNHV1bYjtx8wmFRRtZv9ySIkIj7BQ3eONlUcRIBi9EiQgL93dhXKMY0Hc7AF45pPi0wXCLShaAyWIuHn9K8x4VTH+td405f+FflDdmAUbYXc6pnDky6sAslI0ZHsPQvIkCLMn2kYADy6GRUWN0KUWYsaIup20RkH1tTs9fTtAFNpLmHxyiLNGUuynIPhpsAF/WpcW58pWxCK3hBxc=
